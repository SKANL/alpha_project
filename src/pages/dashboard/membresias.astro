---
import Layout from "@/layouts/Dashboard.astro";
import Navigation from "@/components/Navigation.astro";
import PageHeader from "@/components/ui/PageHeader.astro";
import Button from "@/components/ui/Button.astro";

const { user } = Astro.locals;

if (!user) {
  return Astro.redirect("/auth/signin");
}
---

<Layout title="Membresías">
  <Navigation currentPage="membresias" />

  <main class="flex-1 ml-60 p-16 max-w-7xl">
    <PageHeader title="Membresías" subtitle="Administrar planes y suscripciones" />

    <section class="py-12">
      <div class="max-w-6xl mx-auto">
        

        <div class="grid lg:grid-cols-3 gap-8">
          <!-- PLAN: BOUTIQUE -->
          <div class="pricing-card group relative bg-surface-card border border-border rounded-sm p-8 flex flex-col hover:-translate-y-2 transition-transform duration-500">
            <div class="mb-8">
              <h3 class="text-xl font-serif text-content-primary mb-2">Bufete Boutique</h3>
              <p class="text-sm text-content-muted font-light">Para firmas especializadas.</p>
            </div>
            <div class="mb-8">
              <div class="flex items-baseline gap-1">
                <span class="text-3xl font-light text-content-primary">$2,999</span>
                <span class="text-sm text-content-muted">MXN/mes</span>
              </div>
              <p class="text-xs text-content-muted mt-2">+ IVA</p>
            </div>

            <ul class="space-y-4 mb-8 flex-1">
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> 5 Usuarios (Abogados)</li>
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> 20 Salas de Bienvenida / mes</li>
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> 2 GB Almacenamiento</li>
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> Logo del Despacho</li>
            </ul>

            <Button href="/dashboard/membresias/checkout?plan=boutique&price=2999" variant="outline" class="w-full justify-center">SOLICITAR ACCESO</Button>
          </div>

          <!-- PLAN: FIRMA CONSOLIDADA -->
          <div class="pricing-card group relative bg-[#0F0F0E] border border-brand/50 rounded-sm p-8 flex flex-col transform scale-105 shadow-2xl shadow-brand/10 z-10">
            <div class="absolute top-0 right-0 bg-brand text-[#0F0F0E] text-xs font-bold px-3 py-1 rounded-bl-sm tracking-widest uppercase">Recomendado</div>

            <div class="mb-8 relative z-10">
              <h3 class="text-xl font-serif text-brand mb-2">Firma Consolidada</h3>
              <p class="text-sm text-content-secondary font-light">El estándar de oro.</p>
            </div>
            <div class="mb-8 relative z-10">
              <div class="flex items-baseline gap-1">
                <span class="text-4xl font-light text-white">$7,999</span>
                <span class="text-sm text-content-secondary">MXN/mes</span>
              </div>
              <p class="text-xs text-content-muted mt-2">+ IVA</p>
            </div>

            <ul class="space-y-4 mb-8 flex-1 relative z-10">
              <li class="flex items-center gap-3 text-sm text-white"><span class="text-brand">✓</span> 15 Usuarios (Abogados)</li>
              <li class="flex items-center gap-3 text-sm text-white"><span class="text-brand">✓</span> 100 Salas de Bienvenida / mes</li>
              <li class="flex items-center gap-3 text-sm text-white"><span class="text-brand">✓</span> 20 GB Almacenamiento</li>
              <li class="flex items-center gap-3 text-sm text-white"><span class="text-brand">✓</span> Marca Blanca Total</li>
              <li class="flex items-center gap-3 text-sm text-white"><span class="text-brand">✓</span> Soporte Prioritario</li>
            </ul>

            <Button href="/dashboard/membresias/checkout?plan=firma&price=7999" variant="primary" class="w-full justify-center relative z-10 shadow-[0_0_20px_rgba(200,170,110,0.3)] hover:shadow-[0_0_30px_rgba(200,170,110,0.5)] transition-shadow">OBTENER MEMBRESÍA</Button>
          </div>

          <!-- PLAN: CORPORATIVO -->
          <div class="pricing-card group relative bg-surface-card border border-border rounded-sm p-8 flex flex-col hover:-translate-y-2 transition-transform duration-500">
            <div class="mb-8">
              <h3 class="text-xl font-serif text-content-primary mb-2">Corporativo</h3>
              <p class="text-sm text-content-muted font-light">Operaciones masivas.</p>
            </div>
            <div class="mb-8">
              <div class="flex items-baseline gap-1">
                <span class="text-3xl font-light text-content-primary">Personalizado</span>
              </div>
              <p class="text-xs text-content-muted mt-2">Contactar Ventas</p>
            </div>

            <ul class="space-y-4 mb-8 flex-1">
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> Usuarios Ilimitados</li>
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> Salas Ilimitadas</li>
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> Almacenamiento a Medida (1TB+)</li>
              <li class="flex items-center gap-3 text-sm text-content-secondary"><span class="text-brand">✓</span> Instancia Dedicada</li>
            </ul>

            <Button href="mailto:ventas@aureuslaw.com" variant="outline" class="w-full justify-center">CONTACTAR</Button>
          </div>
        </div>

        <!-- Add-ons -->
        <div class="max-w-4xl mx-auto mt-12 pt-8 border-t border-border-weak/30">
          <h3 class="text-center text-xl font-serif text-content-primary mb-8">Paquetes de Expansión</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div class="flex items-center justify-between p-6 bg-surface-card border border-border rounded-sm">
              <div>
                <h4 class="text-content-primary font-medium">+10 Salas de Bienvenida</h4>
                <p class="text-sm text-content-muted">Capacidad adicional mensual</p>
              </div>
              <div class="text-right">
                <div class="text-brand font-light">$500 MXN</div>
                <div class="text-xs text-content-muted">/mes</div>
              </div>
            </div>
            <div class="flex items-center justify-between p-6 bg-surface-card border border-border rounded-sm">
              <div>
                <h4 class="text-content-primary font-medium">+50 GB Almacenamiento</h4>
                <p class="text-sm text-content-muted">Espacio seguro adicional</p>
              </div>
              <div class="text-right">
                <div class="text-brand font-light">$900 MXN</div>
                <div class="text-xs text-content-muted">/mes</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      // Mouse Tracking for Spotlight Effect (client-side)
      const cards = document.querySelectorAll('.pricing-card');
      if (cards) {
        cards.forEach(card => {
          card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            card.style.setProperty('--mouse-x', x + 'px');
            card.style.setProperty('--mouse-y', y + 'px');
          });
        });
      }
    </script>
  </main>
</Layout>
