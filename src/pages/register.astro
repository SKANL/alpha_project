---
import Layout from "../layouts/Layout.astro";

const { cookies, redirect } = Astro;

const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");

if (accessToken && refreshToken) {
  return redirect("/dashboard");
}
---

<Layout title="Register">
  <div class="min-h-screen flex items-center justify-center px-4 py-8">
    <div class="w-full max-w-sm" style="max-width: 280px;">
      <!-- Header -->
      <div class="form-header">
        <h1>始める</h1>
        <p>create account</p>
      </div>

      <!-- Divider -->
      <div class="form-divider"></div>

      <!-- Form -->
      <form action="/api/auth/register" method="post" class="form-container">
        <!-- Email Group -->
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="name@example.com"
            required
            class="transition-all duration-300"
          />
        </div>

        <!-- Password Group -->
        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            name="password"
            id="password"
            placeholder="••••••"
            required
            class="transition-all duration-300"
          />
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn-primary mt-3 w-full uppercase text-xs font-light tracking-widest py-1.5 transition-all"
        >
          Register
        </button>
      </form>

      <!-- Divider -->
      <div class="form-divider"></div>

      <!-- Footer -->
      <div class="form-footer">
        <p>Already have an account? <a href="/signin">sign in</a></p>
      </div>
    </div>
  </div>
</Layout>
